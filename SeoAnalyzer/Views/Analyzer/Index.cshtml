@model SeoAnalyzer.Models.Analyzer_Settings

@{
    ViewBag.Title = "Home Page";
}




<div style="padding:20px;">
    @using (Ajax.BeginForm("Analyzer", new AjaxOptions()
           {
               OnBegin = "onBegin",
               OnComplete = "onComplete",
               OnFailure = "onFailure",
               OnSuccess = "onSuccess",
               InsertionMode = InsertionMode.Replace,
               UpdateTargetId = "searchResults"
           }))
     {

        <div class="input-group">
            @Html.TextBoxFor(model => model.Url, new { @id = "url", @name = "url", @class = "form-control search-query" })
            <span class="input-group-btn">
                <button type="submit" class="btn btn-primary"> Анализировать</button>
            </span>
        </div>

    <div class="well" style="margin-top:20px">

        <div class="row">
            <div class="col-xs-12 col-md-4">
                <div class="checkbox">
                    @Html.LabelFor(x => x.ParceTitleMetaTag)
                    @Html.CheckBoxFor(x => x.ParceTitleMetaTag, new { @checked = "checked" })
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="checkbox">
                    @Html.LabelFor(x => x.ParceDescriptionMetaTag)
                    @Html.CheckBoxFor(x => x.ParceDescriptionMetaTag, new { @checked = "checked" })
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="checkbox">
                    @Html.LabelFor(x => x.ParceDescriptionMetaTag)
                    @Html.CheckBoxFor(x => x.ParceDescriptionMetaTag, new { @checked = "checked" })
                </div>
            </div>
        </div>


     
    </div>
        

 

       


    <div id="searchError" class="searchError alert alert-danger alert-dismissible" role="alert">
        <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h3>Anlyze service error. Please try again.</h3>
        @Html.ValidationSummary()
        @Html.ValidationMessageFor(model => model.Url)
    </div>
     }
</div>


<div id="loadingDisplay" class="progressBarLoad">
    <h2>Анализируем сайт....</h2>
    <div class="progress progress-striped ">
        <div id="loadProgressBar" class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 20%"></div>
    </div>
</div>


@Html.Partial("~/Views/Analyzer/Partial/_AnalysisResult.cshtml")







<script>

    function onBegin()
    {
        $('#searchError').hide(0);
        $('#searchResults').hide(0);
        $('#loadingDisplay').show(0);
        $('#loadProgressBar').css('width', '50%').attr("aria-valuenow", 50);
        //$(".body-content").css("opacity", "0.5");
    }

    function onComplete()
    {
        $('#loadProgressBar').css('width', '100%').attr("aria-valuenow", 100);
        //$(".body-content").css("opacity", "1");
        $("#loadingDisplay").delay(500).fadeOut(20).queue(function (next)
        {
            $('#loadProgressBar').delay(1200).css('width', '0%').attr("aria-valuenow", 0);
            next();
        });
    }
    function onSuccess()
    {
        $('#searchResults').delay(800).slideDown(500);
    }

    function onFailure()
    {
        $('#searchError').show(0);
    }

</script>